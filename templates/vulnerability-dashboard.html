{% extends "base.html" %}
{% load i18n %}
{% load static %}
{% load leaflet_tags %}


{% block metakeywords %}
    {% blocktranslate trimmed %}
        Université de Sherbrooke, climate change, vulnerability, sensitivity, adaptive capacity,
        adaptation, geoadaptation, geomatic, GIS, public health, urban heat island, Québec, thesis, PhD
    {% endblocktranslate %}
{% endblock %}


{% block description %}
    {% blocktranslate trimmed %}
        Summary of my PhD thesis and tools to assess climate change vulnerability for any region in the province of
        Québec
    {% endblocktranslate %}
{% endblock %}


{% block title %}
    {% translate "Vulnerability dashboard" %}
{% endblock %}


{% block stylesheet %}
    {% leaflet_css plugins="ALL"%}
    <!-- To be changed -->
    <link rel="stylesheet" href="{% static 'css/vulnerability-dashboard.css' %}">
    <link rel="stylesheet" href="{% static 'css/jquery-ui.min.css' %}">
    

{% endblock %}


{% block head %}
<a href="{% translate "Research" %}" class="no-decoration">
    <div class="header" id="research-header">
            <div class="section-text-title">
                <h1><span>{% translate "Research" %}</span></h1>
            </div>
    </div>
</a>
{% endblock %}

{% block content %}
<div class="main-content-title">
    <h1>Prototype de tableau de bord pour l'aide à la décision pour le risque climatique 
        et les options d'adaptation associées</h1>
</div>
    
<div class="main-content-top text-center">
    <h5>
    Tableau de bord diagnostique pour l'évaluation du risque climatique
    </h5>
</div>
    
<div>
    <form action="vulnerability-dashboard.html" method="post">
    {% csrf_token %}
    <div class="row dashboard-row">
        <div class="dashboard-background">
            <div class="row gx-4">
                <div class="col-xl-6 gy-1">
                    <div class="hazard text-center">
                        <h6> 
                            Aléas
                        </h6>
                        <p>
                            Vagues de chaleur
                        </p>
                    </div>
                </div>
                <div class="col-xl-6 gy-1">
                    <div class="exposure text-center">
                        <h6> 
                            Exposition 
                        </h6>
                        <p>
                            Région au-dessus de 197 degrés-jours de refroidissement
                        </p>
                    </div>
                </div>
            </div>
            <div class="row gx-4">
                <div class="col-xl-6 gy-1">
                    <div class="impact text-center">
                        <h6>
                            Impact 
                        </h6>
                        <p>
                            Mortalité quotidienne pour l'année 2018
                        </p>
                    </div>
                </div>
                <div class="col-xl-6 gy-1">
                    <div class="vulnerability text-center">
                        <h6>
                            Niveau de vulnérabilité - Mortalité estivale (déviation par rapport à la moyenne)
                        </h6>
                        <div class="checkbox_vulnerability">
                            <input type="checkbox" id="vulnerabilityVeryLow_M1" name="Très faible" value="veryLow" checked autocomplete="off">
                            <label for="vulnerabilityVeryLow_M1">Très faible</label><br>
                            <input type="checkbox" id="vulnerabilityLow_M1" name="Faible" value="low" checked autocomplete="off">
                            <label for="vulnerabilityLow_M1">Faible</label><br>
                            <input type="checkbox" id="vulnerabilityAverage_M1" name="Moyen" value="average" checked autocomplete="off">
                            <label for="vulnerabilityAverage_M1">Moyen</label><br>
                            <input type="checkbox" id="vulnerabilityHigh_M1" name="Élevé" value="high" checked autocomplete="off">
                            <label for="vulnerabilityHigh_M1">Élevé</label><br>
                            <input type="checkbox" id="vulnerabilityVeryHigh_M1" name="Très élevé" value="veryHigh" checked autocomplete="off">
                            <label for="vulnerabilityVeryHigh_M1">Très élevé</label><br>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row map-row gx-4">
                <div class="col-xl-6 gy-1">
                    <div class="impact-image-background">
                        <div class="row gx-4">
                            <div class="col-xl-6 gy-1">
                                <div class="image-container-full">
                                    <img src="{% static "/img/daily_impact_2018.svg" %}">
                                </div>
                            </div>
                            <div class="col-xl-6 gy-1">
                                <div class="row gx-1">
                                    <div  class="image-container-half">
                                        <img src="{% static "/img/intermediate_aging_projected_impacts.svg" %}">
                                    </div>
                                </div>
                                <div class="row gx-1">
                                    <div  class="image-container-half">
                                        <img src="{% static "/img/shap_impacts_2018.svg" %}">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-6 gy-1">
                    <div class="vulnerability-map-background text-center">
                        {% leaflet_map "vulnerability_map" callback="dashboard_map_vulnerability" settings_overrides=settings_overrides %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="main-content-center text-center">
        <h5>
            Tableau de bord pour l'analyse des options d'adaptation
        </h5>
    </div>
    <div class="row dashboard-row">
        <div class="dashboard-background">
            <div class="row gx-4">
                <div class="col-xl-6">
                    <div class="row">
                        <div class="col-xl-6">
                            <div class="hazard text-center">
                                <h6> 
                                    Aléas
                                </h6>
                                <p>
                                    Vagues de chaleur
                                </p>
                            </div>
                        </div>
                        <div class="col-xl-6">
                            <div class="exposure text-center">
                                <h6> 
                                    Exposition 
                                </h6>
                                <p>
                                    Région au-dessus de 197 degrés-jours de refroidissement
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="vulnerability text-center">
                        <h6> 
                            Niveaux de vulnérabilité
                        </h6>
                        <div class="checkbox_vulnerability">
                            <input type="checkbox" id="vulnerabilityVeryLow_M2" name="Très faible" value="veryLow" autocomplete="off">
                            <label for="vulnerabilityVeryLow_M2">Très faible</label><br>
                            <input type="checkbox" id="vulnerabilityLow_M2" name="Faible" value="low" autocomplete="off">
                            <label for="vulnerabilityLow_M2">Faible</label><br>
                            <input type="checkbox" id="vulnerabilityAverage_M2" name="Moyen" value="average" autocomplete="off">
                            <label for="vulnerabilityAverage_M2">Moyen</label><br>
                            <input type="checkbox" id="vulnerabilityHigh_M2" name="Élevé" value="high" checked autocomplete="off">
                            <label for="vulnerabilityHigh_M2">Élevé</label><br>
                            <input type="checkbox" id="vulnerabilityVeryHigh_M2" name="Très élevé" value="veryHigh" checked autocomplete="off">
                            <label for="vulnerabilityVeryHigh_M2">Très élevé</label><br>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row gx-4">
                <div class="col-xl-6 gy-1">
                    <div class="adaptation-option text-center">
                        <h6>
                            Options d'adaptation
                        </h6> 
                        <p> 
                            Analyse de la revégétalisation pour les vagues de chaleur
                        </p>
                    </div>
                </div>
                <div class="col-xl-6 gy-1">
                     <div class="row">
                        <div class="col-xl-6">
                            <div class="vulnerability text-center">
                                <h6> 
                                    Sensibilité
                                </h6>
                                <select name="dropdownSensitivity" id="dropdownSensitivity">
                                    <option value="age_65_over_pct" selected="selected">65 ans et plus (%)</option>
                                    <option value="age_75_over_pct">75 ans et plus (%)</option>
                                    <option value="age_85_over_pct">85 ans et plus (%)</option>
                                    <option value="lico_at_pct">Faible revenu (%)</option>
                                    <option value="no_degree_pct">Sans diplôme (%)</option>
                                    <option value="renter_pct">Locataire (%)</option>
                                    <option value="one_person_household_pct">Ménage seul (%)</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-xl-6">
                            <div class="vulnerability text-center">
                                <h6> 
                                    Capacité d'adaptation
                                </h6>
                                <select name="dropdownAdaptiveCapacity" id="dropdownAdaptiveCapacity">
                                    <option value="vegetation_pct" selected="selected">Végétation</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row map-row gx-4">
                <div class="col-xl-6 gy-1">
                    <div class="adaptation-option-background">
                        <div class="row gx-4">
                            <div class="col-xl-6 gy-1">
                                <div class="image-container-full">
                                        <img src="{% static "/img/shap_vulnerability_2018.svg" %}">
                                </div>
                            </div>
                            <div class="col-xl-6 gy-1">
                                <div class="adaptation-analysis">
                                    <p>
                                        <b>Limites d'adaptation fermes :</b> Les végétaux sont à risque de mourir si les températures excèdent leur seuil de tolérance.
                                    </p>
                                    <p>
                                        <b>Limites d'adaptation souples :</b> La gouvernance actuelle ne permet pas d'instaurer rapidement des solutions basées sur la nature. 
                                    </p>
                                    <p>
                                        <b>Solution sans regrets :</b> Les services écosystémiques des végétaux sont essentiels, même en l'absence des changements climatiques.
                                    </p>
                                    <p>
                                        <b>Co-bénéfices :</b> Les végétaux permettent de purifier l'eau, l'air, réduire les inondations, les sécheresses, 
                                        séquestrer du carbone, augmenter la santé mentale et le bien-être des gens.
                                    </p>
                                    <p>
                                        <b>Coûts-efficacité :</b> Les services écosystémiques permettent de réduire les 
                                        dépenses relatifs à la gestion des eaux pluviales et des aléas climatiques. L'investissement 
                                        est très rentable si on prend en compte l'ensemble des externalités environnementales du développement économique traditionnel. 
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-6 gy-1">
                    <div class="adaptation-option-background text-center">
                        {% leaflet_map "adaptation_map" callback="dashboard_map_adaptation" settings_overrides=settings_overrides %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    </form>
</div>
    

<!-- This hidden div is a trick to get the dynamic URL of the page (/fr/ or /en/) to be able to retrieve it in
the javascript file. Django template doesn't work in external JS files and for security reasons, leaving JS script
in HTML file is considered a bad practice. -->
<div id="dynamic_url_vulnerability_dashboard" data-url="{% url "vulnerability-dashboard" %}"></div>

{% endblock %}


{% block custom_script %}

<script src="{%  static 'js/jquery-ui.min.js' %}"></script>
<script src="{%  static 'js/vulnerability_dashboard.js' %}"></script>

    
    
{% leaflet_js plugins="ALL" %}




{% endblock %}